%% Snowflake to MySQL Connectivity Validation via Proxy

%% This diagram illustrates the validation process for ensuring connectivity from Snowflake to the Staging MySQL database through a proxy, with all acceptance criteria and validation steps.

flowchart LR
    %% Main Components
    SF["üèîÔ∏è Snowflake"]
    PROXY[("üõ°Ô∏è Staging Proxy")]
    MYSQL[("üóÑÔ∏è MySQL DB")]
    DIRECT[("‚ùå Direct Access")]
    
    %% Validation Process - Compact Layout
    START(("üöÄ Start")) --> CONFIG{"‚öôÔ∏è Configure"}
    CONFIG --> TEST{"üîå Test Connection"}
    TEST --> CONN_OK{"‚úÖ Connected?"}
    
    CONN_OK -->|"Yes"| RW_TEST{"üìñüìù R/W Test"}
    CONN_OK -->|"No"| FAIL(("‚ùå Failed"))
    
    RW_TEST -->|"‚úÖ Pass"| STABLE{"üîÑ Stability Test"}
    RW_TEST -->|"‚ùå Fail"| FAIL
    
    STABLE -->|"‚úÖ Stable"| DOC{"üìã Document"}
    STABLE -->|"‚ùå Unstable"| FAIL
    
    DOC --> READY{"üéØ Prod Ready?"}
    READY -->|"‚úÖ Yes"| SUCCESS(("‚úÖ Complete"))
    READY -->|"‚ö†Ô∏è Needs Tuning"| FAIL
    
    %% Connection Architecture (Parallel)
    SF -.->|"‚úÖ Via Proxy"| PROXY
    PROXY --> MYSQL
    SF -.->|"‚ùå Blocked"| DIRECT
    DIRECT -.->|"‚ùå No Access"| MYSQL
           
    %% Styling
    classDef success fill:#d4edda,stroke:#155724,stroke-width:2px,color:#155724
    classDef failure fill:#f8d7da,stroke:#721c24,stroke-width:2px,color:#721c24
    classDef process fill:#e2e3e5,stroke:#383d41,stroke-width:2px,color:#383d41
    classDef component fill:#cce5ff,stroke:#0056b3,stroke-width:3px,color:#0056b3
    classDef blocked fill:#ffe6cc,stroke:#cc5500,stroke-width:2px,color:#cc5500
    classDef criteria fill:#fff3cd,stroke:#856404,stroke-width:2px,color:#856404
    
    %% Apply styles
    class SUCCESS success
    class FAIL failure
    class START,CONFIG,TEST,DOC process
    class CONN_OK,RW_TEST,STABLE,READY process
    class SF,PROXY,MYSQL component
    class DIRECT blocked

%% ## Key Points

%% ### Connection Requirements
%% - **All traffic must flow through the staging proxy endpoint**
%% - **Direct public database access is prohibited**
%% - **Connection must be reliable and stable**

%% ### Validation Steps
%% 1. **Configure** Snowflake to connect via proxy endpoint
%% 2. **Test** basic connectivity through proxy
%% 3. **Validate** read/write operations work correctly
%% 4. **Confirm** connection stability over time
%% 5. **Document** all findings, quirks, and recommendations

%% ### Success Criteria
%% - ‚úÖ Reliable connection established
%% - ‚úÖ No direct public DB access used
%% - ‚úÖ Read/write operations functional
%% - ‚úÖ Connection remains stable
%% - ‚úÖ All findings documented for production readiness

%% ### Documentation Requirements
%% - Connection configuration details
%% - Performance metrics and benchmarks
%% - Any connection quirks or limitations discovered
%% - Tuning recommendations for optimization
%% - Production readiness assessment and recommendations